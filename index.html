<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cool Time Display with Random Image</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      position: relative;
    }
    #time {
      font-size: 5em;
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }
    #date {
      font-size: 1.5em;
      opacity: 0.7;
      position: relative;
      z-index: 1;
    }
    #random-image {
      position: absolute;
      width: 25%;
      z-index: -1;
      transform: rotateZ(var(--rotate-angle));
      --rotate-angle: 0deg;
    }
    .visible-text {
      color: white;
      text-shadow: 0 0 2px black;
    }
  </style>
</head>

<body id="bg">

  <div id="date" class="visible-text"></div>
  <div id="time" class="visible-text"></div>
  <img id="random-image" src="" alt="Random Image">

  <script>
    const images = [
      'pngaaa.com-611375.png', 'pngaaa.com-611387.png', 'pngaaa.com-1233502.png', 'pngaaa.com-1233599.png',
      'pngaaa.com-1233548.png', 'pngaaa.com-1233652.png', 'pngaaa.com-170036.png', 'pngaaa.com-4309194.png',
      'pngaaa.com-4309208.png', 'image_2024-06-05_163450069.png', 'image_2024-06-05_163530254.png',
      'image_2024-06-05_163806422.png', 'image_2024-06-06_155251015.png', 'image_2024-06-06_155440849.png',
      'image_2024-06-06_155558738.png', 'image_2024-06-06_155726876.png', 'image_2024-06-06_155850163.png',
      'image_2024-06-06_160015779.png', 'image.png', 'image1.png', 'image_2024-06-05_163450069.png',
      'image_2024-06-05_163530254.png', 'image_2024-06-05_163806422.png'
    ];
    const angles = [20, 30, 10, 50, 60, 0, -10, -20, -30, -50, -60];
    const specialDates = {
      "8-15": "independence_day.jpg",
      "1-1": "new_year.jpg",
    };

    function getRandomIndex(currentIndex, maxIndex) {
      let randomIndex = Math.floor(Math.random() * maxIndex);
      while (randomIndex === currentIndex) {
        randomIndex = Math.floor(Math.random() * maxIndex);
      }
      return randomIndex;
    }

    function getRandomAngle(angles) {
      return angles[Math.floor(Math.random() * angles.length)];
    }

    function updateTime() {
      const now = new Date();
      const day = now.getDate();
      const month = now.getMonth() + 1;
      const year = now.getFullYear();
      const dayOfWeek = now.toLocaleDateString('en', { weekday: 'long' });
      const dateString = `${dayOfWeek}, ${month}/${day}/${year}`;
      document.getElementById('date').innerText = dateString;

      const hours = now.getHours();
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      const timeString = `${hours}:${minutes}:${seconds}`;
      document.getElementById('time').innerText = timeString;

      const dateKey = `${month}-${day}`;
      if (specialDates[dateKey]) {
        document.body.style.backgroundImage = `url(${specialDates[dateKey]})`;
      } else {
        let imageUrl;
        if (hours >= 6 && hours < 12) {
          imageUrl = 'morning.jpg';
        } else if (hours >= 12 && hours < 16) {
          imageUrl = 'afternoon.jpg';
        } else if (hours >= 16 && hours < 20) {
          imageUrl = 'evening.jpg';
        } else {
          imageUrl = 'night.jpg';
        }
        document.body.style.backgroundImage = `url(${imageUrl})`;
      }

      let storedIndex = localStorage.getItem('randomIndex');
      if (storedIndex === null) {
        storedIndex = -1;
      }
      const randomIndex = getRandomIndex(parseInt(storedIndex), images.length);
      localStorage.setItem('randomIndex', randomIndex);
      const randomImage = images[randomIndex];
      document.getElementById('random-image').src = randomImage;

      const randomImageElement = document.getElementById('random-image');
      randomImageElement.onload = () => {
        const stickerWidth = randomImageElement.clientWidth;
        const stickerHeight = randomImageElement.clientHeight;
        const viewportHeight = window.innerHeight - stickerHeight;
        const viewportWidth = window.innerWidth - stickerWidth;
        const margin = 20;

        randomImageElement.style.top = `${Math.random() * (viewportHeight - margin * 2) + margin}px`;
        randomImageElement.style.left = `${Math.random() * (viewportWidth - margin * 2) + margin}px`;

        const randomAngle = getRandomAngle(angles);
        randomImageElement.style.setProperty('--rotate-angle', `${randomAngle}deg`);
      };
    }

    updateTime();
    setInterval(updateTime, 1000);
  </script>

</body>

</html>
